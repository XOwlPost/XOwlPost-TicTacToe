"use strict";var Magic=(()=>{var Vn=Object.create;var Ge=Object.defineProperty;var Kn=Object.getOwnPropertyDescriptor;var qn=Object.getOwnPropertyNames,Zt=Object.getOwnPropertySymbols,Yn=Object.getPrototypeOf,tr=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable;var er=(e,t,n)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rr=(e,t)=>{for(var n in t||(t={}))tr.call(t,n)&&er(e,n,t[n]);if(Zt)for(var n of Zt(t))Hn.call(t,n)&&er(e,n,t[n]);return e};var je=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,n)=>(typeof require!="undefined"?require:t)[n]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var nr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ir=(e,t)=>{for(var n in t)Ge(e,n,{get:t[n],enumerable:!0})},or=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of qn(t))!tr.call(e,s)&&s!==n&&Ge(e,s,{get:()=>t[s],enumerable:!(o=Kn(t,s))||o.enumerable});return e};var ar=(e,t,n)=>(n=e!=null?Vn(Yn(e)):{},or(t||!e||!e.__esModule?Ge(n,"default",{value:e,enumerable:!0}):n,e)),Xn=e=>or(Ge({},"__esModule",{value:!0}),e);var Oe=(e,t,n)=>new Promise((o,s)=>{var l=v=>{try{p(n.next(v))}catch(g){s(g)}},m=v=>{try{p(n.throw(v))}catch(g){s(g)}},p=v=>v.done?o(v.value):Promise.resolve(v.value).then(l,m);p((n=n.apply(e,t)).next())});var qr=nr((Kr,Pt)=>{(function(e){if(typeof Kr=="object"&&typeof Pt<"u")Pt.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=e()}})(function(){var e,t,n;return function o(s,l,m){function p(y,N){if(!l[y]){if(!s[y]){var I=typeof je=="function"&&je;if(!N&&I)return I(y,!0);if(v)return v(y,!0);var M=new Error("Cannot find module '"+y+"'");throw M.code="MODULE_NOT_FOUND",M}var C=l[y]={exports:{}};s[y][0].call(C.exports,function(W){var O=s[y][1][W];return p(O||W)},C,C.exports,o,s,l,m)}return l[y].exports}for(var v=typeof je=="function"&&je,g=0;g<m.length;g++)p(m[g]);return p}({1:[function(o,s,l){(function(m){"use strict";var p=m.MutationObserver||m.WebKitMutationObserver,v;if(p){var g=0,y=new p(W),N=m.document.createTextNode("");y.observe(N,{characterData:!0}),v=function(){N.data=g=++g%2}}else if(!m.setImmediate&&typeof m.MessageChannel<"u"){var I=new m.MessageChannel;I.port1.onmessage=W,v=function(){I.port2.postMessage(0)}}else"document"in m&&"onreadystatechange"in m.document.createElement("script")?v=function(){var B=m.document.createElement("script");B.onreadystatechange=function(){W(),B.onreadystatechange=null,B.parentNode.removeChild(B),B=null},m.document.documentElement.appendChild(B)}:v=function(){setTimeout(W,0)};var M,C=[];function W(){M=!0;for(var B,J,D=C.length;D;){for(J=C,C=[],B=-1;++B<D;)J[B]();D=C.length}M=!1}s.exports=O;function O(B){C.push(B)===1&&!M&&v()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(o,s,l){"use strict";var m=o(1);function p(){}var v={},g=["REJECTED"],y=["FULFILLED"],N=["PENDING"];s.exports=I;function I(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,S!==p&&O(this,S)}I.prototype.catch=function(S){return this.then(null,S)},I.prototype.then=function(S,F){if(typeof S!="function"&&this.state===y||typeof F!="function"&&this.state===g)return this;var U=new this.constructor(p);if(this.state!==N){var K=this.state===y?S:F;C(U,K,this.outcome)}else this.queue.push(new M(U,S,F));return U};function M(S,F,U){this.promise=S,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}M.prototype.callFulfilled=function(S){v.resolve(this.promise,S)},M.prototype.otherCallFulfilled=function(S){C(this.promise,this.onFulfilled,S)},M.prototype.callRejected=function(S){v.reject(this.promise,S)},M.prototype.otherCallRejected=function(S){C(this.promise,this.onRejected,S)};function C(S,F,U){m(function(){var K;try{K=F(U)}catch(Q){return v.reject(S,Q)}K===S?v.reject(S,new TypeError("Cannot resolve promise with itself")):v.resolve(S,K)})}v.resolve=function(S,F){var U=B(W,F);if(U.status==="error")return v.reject(S,U.value);var K=U.value;if(K)O(S,K);else{S.state=y,S.outcome=F;for(var Q=-1,ie=S.queue.length;++Q<ie;)S.queue[Q].callFulfilled(F)}return S},v.reject=function(S,F){S.state=g,S.outcome=F;for(var U=-1,K=S.queue.length;++U<K;)S.queue[U].callRejected(F);return S};function W(S){var F=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof F=="function")return function(){F.apply(S,arguments)}}function O(S,F){var U=!1;function K(le){U||(U=!0,v.reject(S,le))}function Q(le){U||(U=!0,v.resolve(S,le))}function ie(){F(Q,K)}var se=B(ie);se.status==="error"&&K(se.value)}function B(S,F){var U={};try{U.value=S(F),U.status="success"}catch(K){U.status="error",U.value=K}return U}I.resolve=J;function J(S){return S instanceof this?S:v.resolve(new this(p),S)}I.reject=D;function D(S){var F=new this(p);return v.reject(F,S)}I.all=ge;function ge(S){var F=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=S.length,K=!1;if(!U)return this.resolve([]);for(var Q=new Array(U),ie=0,se=-1,le=new this(p);++se<U;)he(S[se],se);return le;function he(be,d){F.resolve(be).then(_,function(A){K||(K=!0,v.reject(le,A))});function _(A){Q[d]=A,++ie===U&&!K&&(K=!0,v.resolve(le,Q))}}}I.race=ne;function ne(S){var F=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=S.length,K=!1;if(!U)return this.resolve([]);for(var Q=-1,ie=new this(p);++Q<U;)se(S[Q]);return ie;function se(le){F.resolve(le).then(function(he){K||(K=!0,v.resolve(ie,he))},function(he){K||(K=!0,v.reject(ie,he))})}}},{1:1}],3:[function(o,s,l){(function(m){"use strict";typeof m.Promise!="function"&&(m.Promise=o(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(o,s,l){"use strict";var m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function p(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function v(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var g=v();function y(){try{if(!g||!g.open)return!1;var r=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),a=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||a)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function N(r,a){r=r||[],a=a||{};try{return new Blob(r,a)}catch(u){if(u.name!=="TypeError")throw u;for(var i=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,c=new i,f=0;f<r.length;f+=1)c.append(r[f]);return c.getBlob(a.type)}}typeof Promise>"u"&&o(3);var I=Promise;function M(r,a){a&&r.then(function(i){a(null,i)},function(i){a(i)})}function C(r,a,i){typeof a=="function"&&r.then(a),typeof i=="function"&&r.catch(i)}function W(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}function O(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var B="local-forage-detect-blob-support",J=void 0,D={},ge=Object.prototype.toString,ne="readonly",S="readwrite";function F(r){for(var a=r.length,i=new ArrayBuffer(a),c=new Uint8Array(i),f=0;f<a;f++)c[f]=r.charCodeAt(f);return i}function U(r){return new I(function(a){var i=r.transaction(B,S),c=N([""]);i.objectStore(B).put(c,"key"),i.onabort=function(f){f.preventDefault(),f.stopPropagation(),a(!1)},i.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),u=navigator.userAgent.match(/Edge\//);a(u||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function K(r){return typeof J=="boolean"?I.resolve(J):U(r).then(function(a){return J=a,J})}function Q(r){var a=D[r.name],i={};i.promise=new I(function(c,f){i.resolve=c,i.reject=f}),a.deferredOperations.push(i),a.dbReady?a.dbReady=a.dbReady.then(function(){return i.promise}):a.dbReady=i.promise}function ie(r){var a=D[r.name],i=a.deferredOperations.pop();if(i)return i.resolve(),i.promise}function se(r,a){var i=D[r.name],c=i.deferredOperations.pop();if(c)return c.reject(a),c.promise}function le(r,a){return new I(function(i,c){if(D[r.name]=D[r.name]||Z(),r.db)if(a)Q(r),r.db.close();else return i(r.db);var f=[r.name];a&&f.push(r.version);var u=g.open.apply(g,f);a&&(u.onupgradeneeded=function(h){var E=u.result;try{E.createObjectStore(r.storeName),h.oldVersion<=1&&E.createObjectStore(B)}catch(b){if(b.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+h.oldVersion+" to version "+h.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw b}}),u.onerror=function(h){h.preventDefault(),c(u.error)},u.onsuccess=function(){var h=u.result;h.onversionchange=function(E){E.target.close()},i(h),ie(r)}})}function he(r){return le(r,!1)}function be(r){return le(r,!0)}function d(r,a){if(!r.db)return!0;var i=!r.db.objectStoreNames.contains(r.storeName),c=r.version<r.db.version,f=r.version>r.db.version;if(c&&(r.version!==a&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),f||i){if(i){var u=r.db.version+1;u>r.version&&(r.version=u)}return!0}return!1}function _(r){return new I(function(a,i){var c=new FileReader;c.onerror=i,c.onloadend=function(f){var u=btoa(f.target.result||"");a({__local_forage_encoded_blob:!0,data:u,type:r.type})},c.readAsBinaryString(r)})}function A(r){var a=F(atob(r.data));return N([a],{type:r.type})}function L(r){return r&&r.__local_forage_encoded_blob}function P(r){var a=this,i=a._initReady().then(function(){var c=D[a._dbInfo.name];if(c&&c.dbReady)return c.dbReady});return C(i,r,r),i}function x(r){Q(r);for(var a=D[r.name],i=a.forages,c=0;c<i.length;c++){var f=i[c];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return r.db=null,he(r).then(function(u){return r.db=u,d(r)?be(r):u}).then(function(u){r.db=a.db=u;for(var h=0;h<i.length;h++)i[h]._dbInfo.db=u}).catch(function(u){throw se(r,u),u})}function G(r,a,i,c){c===void 0&&(c=1);try{var f=r.db.transaction(r.storeName,a);i(null,f)}catch(u){if(c>0&&(!r.db||u.name==="InvalidStateError"||u.name==="NotFoundError"))return I.resolve().then(function(){if(!r.db||u.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),be(r)}).then(function(){return x(r).then(function(){G(r,a,i,c-1)})}).catch(i);i(u)}}function Z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Me(r){var a=this,i={db:null};if(r)for(var c in r)i[c]=r[c];var f=D[i.name];f||(f=Z(),D[i.name]=f),f.forages.push(a),a._initReady||(a._initReady=a.ready,a.ready=P);var u=[];function h(){return I.resolve()}for(var E=0;E<f.forages.length;E++){var b=f.forages[E];b!==a&&u.push(b._initReady().catch(h))}var w=f.forages.slice(0);return I.all(u).then(function(){return i.db=f.db,he(i)}).then(function(R){return i.db=R,d(i,a._defaultConfig.version)?be(i):R}).then(function(R){i.db=f.db=R,a._dbInfo=i;for(var T=0;T<w.length;T++){var k=w[T];k!==a&&(k._dbInfo.db=i.db,k._dbInfo.version=i.version)}})}function we(r,a){var i=this;r=W(r);var c=new I(function(f,u){i.ready().then(function(){G(i._dbInfo,ne,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),w=b.get(r);w.onsuccess=function(){var R=w.result;R===void 0&&(R=null),L(R)&&(R=A(R)),f(R)},w.onerror=function(){u(w.error)}}catch(R){u(R)}})}).catch(u)});return M(c,a),c}function ke(r,a){var i=this,c=new I(function(f,u){i.ready().then(function(){G(i._dbInfo,ne,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),w=b.openCursor(),R=1;w.onsuccess=function(){var T=w.result;if(T){var k=T.value;L(k)&&(k=A(k));var j=r(k,T.key,R++);j!==void 0?f(j):T.continue()}else f()},w.onerror=function(){u(w.error)}}catch(T){u(T)}})}).catch(u)});return M(c,a),c}function Xr(r,a,i){var c=this;r=W(r);var f=new I(function(u,h){var E;c.ready().then(function(){return E=c._dbInfo,ge.call(a)==="[object Blob]"?K(E.db).then(function(b){return b?a:_(a)}):a}).then(function(b){G(c._dbInfo,S,function(w,R){if(w)return h(w);try{var T=R.objectStore(c._dbInfo.storeName);b===null&&(b=void 0);var k=T.put(b,r);R.oncomplete=function(){b===void 0&&(b=null),u(b)},R.onabort=R.onerror=function(){var j=k.error?k.error:k.transaction.error;h(j)}}catch(j){h(j)}})}).catch(h)});return M(f,i),f}function zr(r,a){var i=this;r=W(r);var c=new I(function(f,u){i.ready().then(function(){G(i._dbInfo,S,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),w=b.delete(r);E.oncomplete=function(){f()},E.onerror=function(){u(w.error)},E.onabort=function(){var R=w.error?w.error:w.transaction.error;u(R)}}catch(R){u(R)}})}).catch(u)});return M(c,a),c}function Jr(r){var a=this,i=new I(function(c,f){a.ready().then(function(){G(a._dbInfo,S,function(u,h){if(u)return f(u);try{var E=h.objectStore(a._dbInfo.storeName),b=E.clear();h.oncomplete=function(){c()},h.onabort=h.onerror=function(){var w=b.error?b.error:b.transaction.error;f(w)}}catch(w){f(w)}})}).catch(f)});return M(i,r),i}function Qr(r){var a=this,i=new I(function(c,f){a.ready().then(function(){G(a._dbInfo,ne,function(u,h){if(u)return f(u);try{var E=h.objectStore(a._dbInfo.storeName),b=E.count();b.onsuccess=function(){c(b.result)},b.onerror=function(){f(b.error)}}catch(w){f(w)}})}).catch(f)});return M(i,r),i}function Zr(r,a){var i=this,c=new I(function(f,u){if(r<0){f(null);return}i.ready().then(function(){G(i._dbInfo,ne,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),w=!1,R=b.openKeyCursor();R.onsuccess=function(){var T=R.result;if(!T){f(null);return}r===0||w?f(T.key):(w=!0,T.advance(r))},R.onerror=function(){u(R.error)}}catch(T){u(T)}})}).catch(u)});return M(c,a),c}function en(r){var a=this,i=new I(function(c,f){a.ready().then(function(){G(a._dbInfo,ne,function(u,h){if(u)return f(u);try{var E=h.objectStore(a._dbInfo.storeName),b=E.openKeyCursor(),w=[];b.onsuccess=function(){var R=b.result;if(!R){c(w);return}w.push(R.key),R.continue()},b.onerror=function(){f(b.error)}}catch(R){f(R)}})}).catch(f)});return M(i,r),i}function tn(r,a){a=O.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var c=this,f;if(!r.name)f=I.reject("Invalid arguments");else{var u=r.name===i.name&&c._dbInfo.db,h=u?I.resolve(c._dbInfo.db):he(r).then(function(E){var b=D[r.name],w=b.forages;b.db=E;for(var R=0;R<w.length;R++)w[R]._dbInfo.db=E;return E});r.storeName?f=h.then(function(E){if(!!E.objectStoreNames.contains(r.storeName)){var b=E.version+1;Q(r);var w=D[r.name],R=w.forages;E.close();for(var T=0;T<R.length;T++){var k=R[T];k._dbInfo.db=null,k._dbInfo.version=b}var j=new I(function(q,z){var X=g.open(r.name,b);X.onerror=function(de){var Fe=X.result;Fe.close(),z(de)},X.onupgradeneeded=function(){var de=X.result;de.deleteObjectStore(r.storeName)},X.onsuccess=function(){var de=X.result;de.close(),q(de)}});return j.then(function(q){w.db=q;for(var z=0;z<R.length;z++){var X=R[z];X._dbInfo.db=q,ie(X._dbInfo)}}).catch(function(q){throw(se(r,q)||I.resolve()).catch(function(){}),q})}}):f=h.then(function(E){Q(r);var b=D[r.name],w=b.forages;E.close();for(var R=0;R<w.length;R++){var T=w[R];T._dbInfo.db=null}var k=new I(function(j,q){var z=g.deleteDatabase(r.name);z.onerror=function(){var X=z.result;X&&X.close(),q(z.error)},z.onblocked=function(){console.warn('dropInstance blocked for database "'+r.name+'" until all open connections are closed')},z.onsuccess=function(){var X=z.result;X&&X.close(),j(X)}});return k.then(function(j){b.db=j;for(var q=0;q<w.length;q++){var z=w[q];ie(z._dbInfo)}}).catch(function(j){throw(se(r,j)||I.resolve()).catch(function(){}),j})})}return M(f,a),f}var rn={_driver:"asyncStorage",_initStorage:Me,_support:y(),iterate:ke,getItem:we,setItem:Xr,removeItem:zr,clear:Jr,length:Qr,key:Zr,keys:en,dropInstance:tn};function nn(){return typeof openDatabase=="function"}var ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",on="~~local_forage_type~",$t=/^~~local_forage_type~([^~]+)~/,Je="__lfsc__:",ht=Je.length,pt="arbf",mt="blob",Dt="si08",xt="ui08",Ut="uic8",Wt="si16",kt="si32",Bt="ur16",Ft="ui32",Gt="fl32",jt="fl64",Vt=ht+pt.length,Kt=Object.prototype.toString;function qt(r){var a=r.length*.75,i=r.length,c,f=0,u,h,E,b;r[r.length-1]==="="&&(a--,r[r.length-2]==="="&&a--);var w=new ArrayBuffer(a),R=new Uint8Array(w);for(c=0;c<i;c+=4)u=ye.indexOf(r[c]),h=ye.indexOf(r[c+1]),E=ye.indexOf(r[c+2]),b=ye.indexOf(r[c+3]),R[f++]=u<<2|h>>4,R[f++]=(h&15)<<4|E>>2,R[f++]=(E&3)<<6|b&63;return w}function vt(r){var a=new Uint8Array(r),i="",c;for(c=0;c<a.length;c+=3)i+=ye[a[c]>>2],i+=ye[(a[c]&3)<<4|a[c+1]>>4],i+=ye[(a[c+1]&15)<<2|a[c+2]>>6],i+=ye[a[c+2]&63];return a.length%3===2?i=i.substring(0,i.length-1)+"=":a.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function an(r,a){var i="";if(r&&(i=Kt.call(r)),r&&(i==="[object ArrayBuffer]"||r.buffer&&Kt.call(r.buffer)==="[object ArrayBuffer]")){var c,f=Je;r instanceof ArrayBuffer?(c=r,f+=pt):(c=r.buffer,i==="[object Int8Array]"?f+=Dt:i==="[object Uint8Array]"?f+=xt:i==="[object Uint8ClampedArray]"?f+=Ut:i==="[object Int16Array]"?f+=Wt:i==="[object Uint16Array]"?f+=Bt:i==="[object Int32Array]"?f+=kt:i==="[object Uint32Array]"?f+=Ft:i==="[object Float32Array]"?f+=Gt:i==="[object Float64Array]"?f+=jt:a(new Error("Failed to get type for BinaryArray"))),a(f+vt(c))}else if(i==="[object Blob]"){var u=new FileReader;u.onload=function(){var h=on+r.type+"~"+vt(this.result);a(Je+mt+h)},u.readAsArrayBuffer(r)}else try{a(JSON.stringify(r))}catch(h){console.error("Couldn't convert value into a JSON string: ",r),a(null,h)}}function sn(r){if(r.substring(0,ht)!==Je)return JSON.parse(r);var a=r.substring(Vt),i=r.substring(ht,Vt),c;if(i===mt&&$t.test(a)){var f=a.match($t);c=f[1],a=a.substring(f[0].length)}var u=qt(a);switch(i){case pt:return u;case mt:return N([u],{type:c});case Dt:return new Int8Array(u);case xt:return new Uint8Array(u);case Ut:return new Uint8ClampedArray(u);case Wt:return new Int16Array(u);case Bt:return new Uint16Array(u);case kt:return new Int32Array(u);case Ft:return new Uint32Array(u);case Gt:return new Float32Array(u);case jt:return new Float64Array(u);default:throw new Error("Unkown type: "+i)}}var gt={serialize:an,deserialize:sn,stringToBuffer:qt,bufferToString:vt};function Yt(r,a,i,c){r.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,c)}function ln(r){var a=this,i={db:null};if(r)for(var c in r)i[c]=typeof r[c]!="string"?r[c].toString():r[c];var f=new I(function(u,h){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(E){return h(E)}i.db.transaction(function(E){Yt(E,i,function(){a._dbInfo=i,u()},function(b,w){h(w)})},h)});return i.serializer=gt,f}function Ee(r,a,i,c,f,u){r.executeSql(i,c,f,function(h,E){E.code===E.SYNTAX_ERR?h.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[a.storeName],function(b,w){w.rows.length?u(b,E):Yt(b,a,function(){b.executeSql(i,c,f,u)},u)},u):u(h,E)},u)}function un(r,a){var i=this;r=W(r);var c=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){Ee(E,h,"SELECT * FROM "+h.storeName+" WHERE key = ? LIMIT 1",[r],function(b,w){var R=w.rows.length?w.rows.item(0).value:null;R&&(R=h.serializer.deserialize(R)),f(R)},function(b,w){u(w)})})}).catch(u)});return M(c,a),c}function cn(r,a){var i=this,c=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){Ee(E,h,"SELECT * FROM "+h.storeName,[],function(b,w){for(var R=w.rows,T=R.length,k=0;k<T;k++){var j=R.item(k),q=j.value;if(q&&(q=h.serializer.deserialize(q)),q=r(q,j.key,k+1),q!==void 0){f(q);return}}f()},function(b,w){u(w)})})}).catch(u)});return M(c,a),c}function Ht(r,a,i,c){var f=this;r=W(r);var u=new I(function(h,E){f.ready().then(function(){a===void 0&&(a=null);var b=a,w=f._dbInfo;w.serializer.serialize(a,function(R,T){T?E(T):w.db.transaction(function(k){Ee(k,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[r,R],function(){h(b)},function(j,q){E(q)})},function(k){if(k.code===k.QUOTA_ERR){if(c>0){h(Ht.apply(f,[r,b,i,c-1]));return}E(k)}})})}).catch(E)});return M(u,i),u}function fn(r,a,i){return Ht.apply(this,[r,a,i,1])}function dn(r,a){var i=this;r=W(r);var c=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){Ee(E,h,"DELETE FROM "+h.storeName+" WHERE key = ?",[r],function(){f()},function(b,w){u(w)})})}).catch(u)});return M(c,a),c}function hn(r){var a=this,i=new I(function(c,f){a.ready().then(function(){var u=a._dbInfo;u.db.transaction(function(h){Ee(h,u,"DELETE FROM "+u.storeName,[],function(){c()},function(E,b){f(b)})})}).catch(f)});return M(i,r),i}function pn(r){var a=this,i=new I(function(c,f){a.ready().then(function(){var u=a._dbInfo;u.db.transaction(function(h){Ee(h,u,"SELECT COUNT(key) as c FROM "+u.storeName,[],function(E,b){var w=b.rows.item(0).c;c(w)},function(E,b){f(b)})})}).catch(f)});return M(i,r),i}function mn(r,a){var i=this,c=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){Ee(E,h,"SELECT key FROM "+h.storeName+" WHERE id = ? LIMIT 1",[r+1],function(b,w){var R=w.rows.length?w.rows.item(0).key:null;f(R)},function(b,w){u(w)})})}).catch(u)});return M(c,a),c}function vn(r){var a=this,i=new I(function(c,f){a.ready().then(function(){var u=a._dbInfo;u.db.transaction(function(h){Ee(h,u,"SELECT key FROM "+u.storeName,[],function(E,b){for(var w=[],R=0;R<b.rows.length;R++)w.push(b.rows.item(R).key);c(w)},function(E,b){f(b)})})}).catch(f)});return M(i,r),i}function gn(r){return new I(function(a,i){r.transaction(function(c){c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,u){for(var h=[],E=0;E<u.rows.length;E++)h.push(u.rows.item(E).name);a({db:r,storeNames:h})},function(f,u){i(u)})},function(c){i(c)})})}function yn(r,a){a=O.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var c=this,f;return r.name?f=new I(function(u){var h;r.name===i.name?h=c._dbInfo.db:h=openDatabase(r.name,"","",0),r.storeName?u({db:h,storeNames:[r.storeName]}):u(gn(h))}).then(function(u){return new I(function(h,E){u.db.transaction(function(b){function w(j){return new I(function(q,z){b.executeSql("DROP TABLE IF EXISTS "+j,[],function(){q()},function(X,de){z(de)})})}for(var R=[],T=0,k=u.storeNames.length;T<k;T++)R.push(w(u.storeNames[T]));I.all(R).then(function(){h()}).catch(function(j){E(j)})},function(b){E(b)})})}):f=I.reject("Invalid arguments"),M(f,a),f}var En={_driver:"webSQLStorage",_initStorage:ln,_support:nn(),iterate:cn,getItem:un,setItem:fn,removeItem:dn,clear:hn,length:pn,key:mn,keys:vn,dropInstance:yn};function _n(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Xt(r,a){var i=r.name+"/";return r.storeName!==a.storeName&&(i+=r.storeName+"/"),i}function In(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}function bn(){return!In()||localStorage.length>0}function wn(r){var a=this,i={};if(r)for(var c in r)i[c]=r[c];return i.keyPrefix=Xt(r,a._defaultConfig),bn()?(a._dbInfo=i,i.serializer=gt,I.resolve()):I.reject()}function Rn(r){var a=this,i=a.ready().then(function(){for(var c=a._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var u=localStorage.key(f);u.indexOf(c)===0&&localStorage.removeItem(u)}});return M(i,r),i}function An(r,a){var i=this;r=W(r);var c=i.ready().then(function(){var f=i._dbInfo,u=localStorage.getItem(f.keyPrefix+r);return u&&(u=f.serializer.deserialize(u)),u});return M(c,a),c}function Sn(r,a){var i=this,c=i.ready().then(function(){for(var f=i._dbInfo,u=f.keyPrefix,h=u.length,E=localStorage.length,b=1,w=0;w<E;w++){var R=localStorage.key(w);if(R.indexOf(u)===0){var T=localStorage.getItem(R);if(T&&(T=f.serializer.deserialize(T)),T=r(T,R.substring(h),b++),T!==void 0)return T}}});return M(c,a),c}function Nn(r,a){var i=this,c=i.ready().then(function(){var f=i._dbInfo,u;try{u=localStorage.key(r)}catch{u=null}return u&&(u=u.substring(f.keyPrefix.length)),u});return M(c,a),c}function Mn(r){var a=this,i=a.ready().then(function(){for(var c=a._dbInfo,f=localStorage.length,u=[],h=0;h<f;h++){var E=localStorage.key(h);E.indexOf(c.keyPrefix)===0&&u.push(E.substring(c.keyPrefix.length))}return u});return M(i,r),i}function Tn(r){var a=this,i=a.keys().then(function(c){return c.length});return M(i,r),i}function On(r,a){var i=this;r=W(r);var c=i.ready().then(function(){var f=i._dbInfo;localStorage.removeItem(f.keyPrefix+r)});return M(c,a),c}function Ln(r,a,i){var c=this;r=W(r);var f=c.ready().then(function(){a===void 0&&(a=null);var u=a;return new I(function(h,E){var b=c._dbInfo;b.serializer.serialize(a,function(w,R){if(R)E(R);else try{localStorage.setItem(b.keyPrefix+r,w),h(u)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(T),E(T)}})})});return M(f,i),f}function Pn(r,a){if(a=O.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var i=this.config();r.name=r.name||i.name,r.storeName=r.storeName||i.storeName}var c=this,f;return r.name?f=new I(function(u){r.storeName?u(Xt(r,c._defaultConfig)):u(r.name+"/")}).then(function(u){for(var h=localStorage.length-1;h>=0;h--){var E=localStorage.key(h);E.indexOf(u)===0&&localStorage.removeItem(E)}}):f=I.reject("Invalid arguments"),M(f,a),f}var Cn={_driver:"localStorageWrapper",_initStorage:wn,_support:_n(),iterate:Sn,getItem:An,setItem:Ln,removeItem:On,clear:Rn,length:Tn,key:Nn,keys:Mn,dropInstance:Pn},$n=function(a,i){return a===i||typeof a=="number"&&typeof i=="number"&&isNaN(a)&&isNaN(i)},Dn=function(a,i){for(var c=a.length,f=0;f<c;){if($n(a[f],i))return!0;f++}return!1},zt=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Be={},Jt={},Te={INDEXEDDB:rn,WEBSQL:En,LOCALSTORAGE:Cn},xn=[Te.INDEXEDDB._driver,Te.WEBSQL._driver,Te.LOCALSTORAGE._driver],Qe=["dropInstance"],yt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qe),Un={description:"",driver:xn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Wn(r,a){r[a]=function(){var i=arguments;return r.ready().then(function(){return r[a].apply(r,i)})}}function Et(){for(var r=1;r<arguments.length;r++){var a=arguments[r];if(a)for(var i in a)a.hasOwnProperty(i)&&(zt(a[i])?arguments[0][i]=a[i].slice():arguments[0][i]=a[i])}return arguments[0]}var kn=function(){function r(a){p(this,r);for(var i in Te)if(Te.hasOwnProperty(i)){var c=Te[i],f=c._driver;this[i]=f,Be[f]||this.defineDriver(c)}this._defaultConfig=Et({},Un),this._config=Et({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return r.prototype.config=function(i){if((typeof i>"u"?"undefined":m(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var c in i){if(c==="storeName"&&(i[c]=i[c].replace(/\W/g,"_")),c==="version"&&typeof i[c]!="number")return new Error("Database version must be a number.");this._config[c]=i[c]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},r.prototype.defineDriver=function(i,c,f){var u=new I(function(h,E){try{var b=i._driver,w=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){E(w);return}for(var R=yt.concat("_initStorage"),T=0,k=R.length;T<k;T++){var j=R[T],q=!Dn(Qe,j);if((q||i[j])&&typeof i[j]!="function"){E(w);return}}var z=function(){for(var Fe=function(Gn){return function(){var jn=new Error("Method "+Gn+" is not implemented by the current driver"),Qt=I.reject(jn);return M(Qt,arguments[arguments.length-1]),Qt}},_t=0,Fn=Qe.length;_t<Fn;_t++){var It=Qe[_t];i[It]||(i[It]=Fe(It))}};z();var X=function(Fe){Be[b]&&console.info("Redefining LocalForage driver: "+b),Be[b]=i,Jt[b]=Fe,h()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(X,E):X(!!i._support):X(!0)}catch(de){E(de)}});return C(u,c,f),u},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(i,c,f){var u=Be[i]?I.resolve(Be[i]):I.reject(new Error("Driver not found."));return C(u,c,f),u},r.prototype.getSerializer=function(i){var c=I.resolve(gt);return C(c,i),c},r.prototype.ready=function(i){var c=this,f=c._driverSet.then(function(){return c._ready===null&&(c._ready=c._initDriver()),c._ready});return C(f,i,i),f},r.prototype.setDriver=function(i,c,f){var u=this;zt(i)||(i=[i]);var h=this._getSupportedDrivers(i);function E(){u._config.driver=u.driver()}function b(T){return u._extend(T),E(),u._ready=u._initStorage(u._config),u._ready}function w(T){return function(){var k=0;function j(){for(;k<T.length;){var q=T[k];return k++,u._dbInfo=null,u._ready=null,u.getDriver(q).then(b).catch(j)}E();var z=new Error("No available storage method found.");return u._driverSet=I.reject(z),u._driverSet}return j()}}var R=this._driverSet!==null?this._driverSet.catch(function(){return I.resolve()}):I.resolve();return this._driverSet=R.then(function(){var T=h[0];return u._dbInfo=null,u._ready=null,u.getDriver(T).then(function(k){u._driver=k._driver,E(),u._wrapLibraryMethodsWithReady(),u._initDriver=w(h)})}).catch(function(){E();var T=new Error("No available storage method found.");return u._driverSet=I.reject(T),u._driverSet}),C(this._driverSet,c,f),this._driverSet},r.prototype.supports=function(i){return!!Jt[i]},r.prototype._extend=function(i){Et(this,i)},r.prototype._getSupportedDrivers=function(i){for(var c=[],f=0,u=i.length;f<u;f++){var h=i[f];this.supports(h)&&c.push(h)}return c},r.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,c=yt.length;i<c;i++)Wn(this,yt[i])},r.prototype.createInstance=function(i){return new r(i)},r}(),Bn=new kn;s.exports=Bn},{3:3}]},{},[4])(4)})});var Hr=nr((ct,Yr)=>{(function(e,t){typeof ct=="object"&&typeof Yr<"u"?t(ct):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],t):t(e.LocalforageDriverMemory={})})(typeof self<"u"?self:ct,function(e){"use strict";var t="localforage-driver-memory";function n(d){var _=typeof Symbol=="function"&&d[Symbol.iterator],A=0;return _?_.call(d):{next:function(){return d&&A>=d.length&&(d=void 0),{value:d&&d[A++],done:!d}}}}function o(d,_){d=d||[],_=_||{};try{return new Blob(d,_)}catch(x){if(x.name!=="TypeError")throw x;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,L=new A,P=0;P<d.length;P+=1)L.append(d[P]);return L.getBlob(_.type)}}var s=/^~~local_forage_type~([^~]+)~/,l=9,m=l+4,p=Object.prototype.toString;function v(d){var _=d.length*.75,A=d.length;d[d.length-1]==="="&&(_--,d[d.length-2]==="="&&_--);for(var L=new ArrayBuffer(_),P=new Uint8Array(L),x=0,G=0;x<A;x+=4){var Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x]),Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x+1]),we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x+2]),ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[x+3]);P[G++]=Z<<2|Me>>4,P[G++]=(Me&15)<<4|we>>2,P[G++]=(we&3)<<6|ke&63}return L}function g(d){for(var _=new Uint8Array(d),A="",L=0;L<_.length;L+=3)A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[L]>>2],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[L]&3)<<4|_[L+1]>>4],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[L+1]&15)<<2|_[L+2]>>6],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[L+2]&63];return _.length%3===2?A=A.substring(0,A.length-1)+"=":_.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function y(d,_){var A="";if(d&&(A=p.call(d)),d&&(A==="[object ArrayBuffer]"||d.buffer&&p.call(d.buffer)==="[object ArrayBuffer]")){var L=void 0,P="__lfsc__:";d instanceof ArrayBuffer?(L=d,P+="arbf"):(L=d.buffer,A==="[object Int8Array]"?P+="si08":A==="[object Uint8Array]"?P+="ui08":A==="[object Uint8ClampedArray]"?P+="uic8":A==="[object Int16Array]"?P+="si16":A==="[object Uint16Array]"?P+="ur16":A==="[object Int32Array]"?P+="si32":A==="[object Uint32Array]"?P+="ui32":A==="[object Float32Array]"?P+="fl32":A==="[object Float64Array]"?P+="fl64":_(new Error("Failed to get type for BinaryArray"))),_(P+g(L))}else if(A==="[object Blob]"){var x=new FileReader;x.onload=function(){var G="~~local_forage_type~"+d.type+"~"+g(this.result);_("__lfsc__:blob"+G)},x.readAsArrayBuffer(d)}else try{_(JSON.stringify(d))}catch(G){console.error("Couldn't convert value into a JSON string: ",d),_(null,G)}}function N(d){if(d.substring(0,l)!=="__lfsc__:")return JSON.parse(d);var _=d.substring(m),A=d.substring(l,m),L;if(A==="blob"&&s.test(_)){var P=_.match(s);L=P[1],_=_.substring(P[0].length)}var x=v(_);switch(A){case"arbf":return x;case"blob":return o([x],{type:L});case"si08":return new Int8Array(x);case"ui08":return new Uint8Array(x);case"uic8":return new Uint8ClampedArray(x);case"si16":return new Int16Array(x);case"ur16":return new Uint16Array(x);case"si32":return new Int32Array(x);case"ui32":return new Uint32Array(x);case"fl32":return new Float32Array(x);case"fl64":return new Float64Array(x);default:throw new Error("Unkown type: "+A)}}function I(d){var _,A;if(d===null||typeof d!="object"||"isActiveClone"in d)return d;var L=d instanceof Date?new Date(d):d.constructor();try{for(var P=n(Object.keys(d)),x=P.next();!x.done;x=P.next()){var G=x.value;Object.prototype.hasOwnProperty.call(d,G)&&(d.isActiveClone=null,L[G]=I(d[G]),delete d.isActiveClone)}}catch(Z){_={error:Z}}finally{try{x&&!x.done&&(A=P.return)&&A.call(P)}finally{if(_)throw _.error}}return L}function M(d,_){return(d.name||_.name)+"/"+(d.storeName||_.storeName)+"/"}function C(d,_){_&&d.then(function(A){_(null,A)},function(A){_(A)})}function W(){for(var d=[],_=0;_<arguments.length;_++)d[_]=arguments[_];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function O(d,_){var A=this;if(_=W.apply(this,arguments),d=typeof d!="function"&&d||{},!d.name){var L=this.config();d.name=d.name||L.name,d.storeName=d.storeName||L.storeName}var P;return d.name?P=new Promise(function(x){d.storeName?x(M(d,A._defaultConfig)):x(d.name+"/")}):P=Promise.reject("Invalid arguments"),{promise:P,callback:_}}function B(d){return typeof d!="string"&&(console.warn(d+" used as a key, but it is not a string."),d=String(d)),d}var J={bufferToString:g,deserialize:N,serialize:y,stringToBuffer:v},D={},ge=function(){function d(_){this.kp=_,this.data={}}return d.resolve=function(_){return D[_]||(D[_]=new d(_)),D[_]},d.prototype.clear=function(){this.data={}},d.prototype.drop=function(){this.clear(),delete D[this.kp]},d.prototype.get=function(_){return this.data[_]},d.prototype.key=function(_){return this.keys()[_]},d.prototype.keys=function(){return Object.keys(this.data)},d.prototype.rm=function(_){delete this.data[_]},d.prototype.set=function(_,A){this.data[_]=A},d}();function ne(d){var _=d?I(d):{},A=M(_,this._defaultConfig),L=ge.resolve(A);return this._dbInfo=_,this._dbInfo.serializer=J,this._dbInfo.keyPrefix=A,this._dbInfo.mStore=L,Promise.resolve()}function S(d){var _=this,A=this.ready().then(function(){_._dbInfo.mStore.clear()});return C(A,d),A}function F(d,_){var A=O.apply(this,arguments),L=A.promise,P=A.callback,x=L.then(function(G){ge.resolve(G).drop()});return C(x,P),L}function U(d,_){var A=this;d=B(d);var L=this.ready().then(function(){var P=A._dbInfo.mStore.get(d);return P==null?null:A._dbInfo.serializer.deserialize(P)});return C(L,_),L}function K(d,_){var A=this,L=this.ready().then(function(){for(var P=A._dbInfo.mStore,x=P.keys(),G=0;G<x.length;G++){var Z=P.get(x[G]);if(Z&&(Z=A._dbInfo.serializer.deserialize(Z)),Z=d(Z,x[G],G+1),Z!==void 0)return Z}});return C(L,_),L}function Q(d,_){var A=this,L=this.ready().then(function(){var P;try{P=A._dbInfo.mStore.key(d),P===void 0&&(P=null)}catch{P=null}return P});return C(L,_),L}function ie(d){var _=this,A=this.ready().then(function(){return _._dbInfo.mStore.keys()});return C(A,d),A}function se(d){var _=this.keys().then(function(A){return A.length});return C(_,d),_}function le(d,_){var A=this;d=B(d);var L=this.ready().then(function(){A._dbInfo.mStore.rm(d)});return C(L,_),L}function he(d,_,A){var L=this;d=B(d);var P=this.ready().then(function(){_===void 0&&(_=null);var x=_;return new Promise(function(G,Z){L._dbInfo.serializer.serialize(_,function(Me,we){if(we)Z(we);else try{L._dbInfo.mStore.set(d,Me),G(x)}catch(ke){Z(ke)}})})});return C(P,A),P}var be=!0;e._support=be,e._driver=t,e._initStorage=ne,e.clear=S,e.dropInstance=F,e.getItem=U,e.iterate=K,e.key=Q,e.keys=ie,e.length=se,e.removeItem=le,e.setItem=he,Object.defineProperty(e,"__esModule",{value:!0})})});var qo={};ir(qo,{default:()=>Ko});var pe=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(pe||{}),Re=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(Re||{}),Le=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e[e.RedirectLoginComplete=-10015]="RedirectLoginComplete",e))(Le||{}),ue=(e=>(e.MetaMask="metamask",e.CoinbaseWallet="coinbase_wallet",e))(ue||{}),Pe=(e=>(e.WalletSelected="wallet_selected",e.WalletConnected="wallet_connected",e.WalletRejected="wallet_rejected",e))(Pe||{}),$=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.SetAuthorizationToken="magic_auth_set_authorization_token",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="magic_get_info",e.ShowUI="magic_wallet",e.NFTPurchase="magic_nft_purchase",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.UpdatePhoneNumber="magic_auth_update_phone_number",e.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e.MagicBoxHeartBeat="magic_box_heart_beat",e.AutoConnect="mc_auto_connect",e.Login="mc_login",e.EncryptV1="magic_auth_encrypt_v1",e.DecryptV1="magic_auth_decrypt_v1",e))($||{}),me=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e.MAGIC_MG_BOX_SEND_RECEIPT="MAGIC_MG_BOX_SEND_RECEIPT",e))(me||{}),Ae=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ae||{}),sr=(e=>(e.MFA="mfa",e.Recovery="recovery",e))(sr||{}),lr=(e=>(e.Harmony="HARMONY",e))(lr||{}),ur=(e=>(e.PhoneNumber="phone_number",e))(ur||{});var zn=Object.create,lt=Object.defineProperty,Jn=Object.defineProperties,Qn=Object.getOwnPropertyDescriptor,Zn=Object.getOwnPropertyDescriptors,ei=Object.getOwnPropertyNames,cr=Object.getOwnPropertySymbols,ti=Object.getPrototypeOf,Rr=Object.prototype.hasOwnProperty,ri=Object.prototype.propertyIsEnumerable,fr=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rt=(e,t)=>{for(var n in t||(t={}))Rr.call(t,n)&&fr(e,n,t[n]);if(cr)for(var n of cr(t))ri.call(t,n)&&fr(e,n,t[n]);return e},Ar=(e,t)=>Jn(e,Zn(t)),ni=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ii=(e,t)=>{for(var n in t)lt(e,n,{get:t[n],enumerable:!0})},oi=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ei(t))!Rr.call(e,s)&&s!==n&&lt(e,s,{get:()=>t[s],enumerable:!(o=Qn(t,s))||o.enumerable});return e},ai=(e,t,n)=>(n=e!=null?zn(ti(e)):{},oi(t||!e||!e.__esModule?lt(n,"default",{value:e,enumerable:!0}):n,e)),ae=(e,t,n)=>new Promise((o,s)=>{var l=v=>{try{p(n.next(v))}catch(g){s(g)}},m=v=>{try{p(n.throw(v))}catch(g){s(g)}},p=v=>v.done?o(v.value):Promise.resolve(v.value).then(l,m);p((n=n.apply(e,t)).next())}),si=ni((e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function l(g,y,N){this.fn=g,this.context=y,this.once=N||!1}function m(g,y,N,I,M){if(typeof N!="function")throw new TypeError("The listener must be a function");var C=new l(N,I||g,M),W=o?o+y:y;return g._events[W]?g._events[W].fn?g._events[W]=[g._events[W],C]:g._events[W].push(C):(g._events[W]=C,g._eventsCount++),g}function p(g,y){--g._eventsCount===0?g._events=new s:delete g._events[y]}function v(){this._events=new s,this._eventsCount=0}v.prototype.eventNames=function(){var g=[],y,N;if(this._eventsCount===0)return g;for(N in y=this._events)n.call(y,N)&&g.push(o?N.slice(1):N);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(y)):g},v.prototype.listeners=function(g){var y=o?o+g:g,N=this._events[y];if(!N)return[];if(N.fn)return[N.fn];for(var I=0,M=N.length,C=new Array(M);I<M;I++)C[I]=N[I].fn;return C},v.prototype.listenerCount=function(g){var y=o?o+g:g,N=this._events[y];return N?N.fn?1:N.length:0},v.prototype.emit=function(g,y,N,I,M,C){var W=o?o+g:g;if(!this._events[W])return!1;var O=this._events[W],B=arguments.length,J,D;if(O.fn){switch(O.once&&this.removeListener(g,O.fn,void 0,!0),B){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,y),!0;case 3:return O.fn.call(O.context,y,N),!0;case 4:return O.fn.call(O.context,y,N,I),!0;case 5:return O.fn.call(O.context,y,N,I,M),!0;case 6:return O.fn.call(O.context,y,N,I,M,C),!0}for(D=1,J=new Array(B-1);D<B;D++)J[D-1]=arguments[D];O.fn.apply(O.context,J)}else{var ge=O.length,ne;for(D=0;D<ge;D++)switch(O[D].once&&this.removeListener(g,O[D].fn,void 0,!0),B){case 1:O[D].fn.call(O[D].context);break;case 2:O[D].fn.call(O[D].context,y);break;case 3:O[D].fn.call(O[D].context,y,N);break;case 4:O[D].fn.call(O[D].context,y,N,I);break;default:if(!J)for(ne=1,J=new Array(B-1);ne<B;ne++)J[ne-1]=arguments[ne];O[D].fn.apply(O[D].context,J)}}return!0},v.prototype.on=function(g,y,N){return m(this,g,y,N,!1)},v.prototype.once=function(g,y,N){return m(this,g,y,N,!0)},v.prototype.removeListener=function(g,y,N,I){var M=o?o+g:g;if(!this._events[M])return this;if(!y)return p(this,M),this;var C=this._events[M];if(C.fn)C.fn===y&&(!I||C.once)&&(!N||C.context===N)&&p(this,M);else{for(var W=0,O=[],B=C.length;W<B;W++)(C[W].fn!==y||I&&!C[W].once||N&&C[W].context!==N)&&O.push(C[W]);O.length?this._events[M]=O.length===1?O[0]:O:p(this,M)}return this},v.prototype.removeAllListeners=function(g){var y;return g?(y=o?o+g:g,this._events[y]&&p(this,y)):(this._events=new s,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=o,v.EventEmitter=v,typeof t<"u"&&(t.exports=v)});function li(e){let t={exports:{}};return e(t,t.exports),t.exports}var ui=Number.MAX_SAFE_INTEGER||9007199254740991,At={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:ui,MAX_SAFE_COMPONENT_LENGTH:16},ci=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Y=ci,ze=li(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=At,o=(t=e.exports={}).re=[],s=t.src=[],l=t.t={},m=0,p=(v,g,y)=>{let N=m++;Y(N,g),l[v]=N,s[N]=g,o[N]=new RegExp(g,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","[0-9]+"),p("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),p("MAINVERSION",`(${s[l.NUMERICIDENTIFIER]})\\.(${s[l.NUMERICIDENTIFIER]})\\.(${s[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${s[l.NUMERICIDENTIFIERLOOSE]})\\.(${s[l.NUMERICIDENTIFIERLOOSE]})\\.(${s[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${s[l.NUMERICIDENTIFIER]}|${s[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${s[l.NUMERICIDENTIFIERLOOSE]}|${s[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${s[l.PRERELEASEIDENTIFIER]}(?:\\.${s[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${s[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER","[0-9A-Za-z-]+"),p("BUILD",`(?:\\+(${s[l.BUILDIDENTIFIER]}(?:\\.${s[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${s[l.MAINVERSION]}${s[l.PRERELEASE]}?${s[l.BUILD]}?`),p("FULL",`^${s[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${s[l.MAINVERSIONLOOSE]}${s[l.PRERELEASELOOSE]}?${s[l.BUILD]}?`),p("LOOSE",`^${s[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${s[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${s[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${s[l.XRANGEIDENTIFIER]})(?:\\.(${s[l.XRANGEIDENTIFIER]})(?:\\.(${s[l.XRANGEIDENTIFIER]})(?:${s[l.PRERELEASE]})?${s[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${s[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[l.XRANGEIDENTIFIERLOOSE]})(?:${s[l.PRERELEASELOOSE]})?${s[l.BUILD]}?)?)?`),p("XRANGE",`^${s[l.GTLT]}\\s*${s[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${s[l.GTLT]}\\s*${s[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",s[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${s[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${s[l.LONETILDE]}${s[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${s[l.LONETILDE]}${s[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${s[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${s[l.LONECARET]}${s[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${s[l.LONECARET]}${s[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${s[l.GTLT]}\\s*(${s[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${s[l.GTLT]}\\s*(${s[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${s[l.GTLT]}\\s*(${s[l.LOOSEPLAIN]}|${s[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${s[l.XRANGEPLAIN]})\\s+-\\s+(${s[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${s[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0.0.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),dr=/^[0-9]+$/,Sr=(e,t)=>{let n=dr.test(e),o=dr.test(t);return n&&o&&(e=+e,t=+t),e===t?0:n&&!o?-1:o&&!n?1:e<t?-1:1},fi=(e,t)=>Sr(t,e),di={compareIdentifiers:Sr,rcompareIdentifiers:fi},{MAX_LENGTH:hr,MAX_SAFE_INTEGER:Ze}=At,{re:pr,t:mr}=ze,{compareIdentifiers:Ve}=di,ee=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>hr)throw new TypeError(`version is longer than ${hr} characters`);Y("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?pr[mr.LOOSE]:pr[mr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ze||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ze||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ze||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<Ze)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Y("SemVer.compare",this.version,this.options,e),!(e instanceof ee)){if(typeof e=="string"&&e===this.version)return 0;e=new ee(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof ee||(e=new ee(e,this.options)),Ve(this.major,e.major)||Ve(this.minor,e.minor)||Ve(this.patch,e.patch)}comparePre(e){if(e instanceof ee||(e=new ee(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],o=e.prerelease[t];if(Y("prerelease compare",t,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n!==o)return Ve(n,o)}while(++t)}compareBuild(e){e instanceof ee||(e=new ee(e,this.options));let t=0;do{let n=this.build[t],o=e.build[t];if(Y("prerelease compare",t,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n!==o)return Ve(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},hi=(e,t,n)=>new ee(e,n).compare(new ee(t,n)),Ue=hi,pi=(e,t,n)=>Ue(e,t,n)===0,mi=pi,vi=(e,t,n)=>Ue(e,t,n)!==0,gi=vi,yi=(e,t,n)=>Ue(e,t,n)>0,Ei=yi,_i=(e,t,n)=>Ue(e,t,n)>=0,Ii=_i,bi=(e,t,n)=>Ue(e,t,n)<0,wi=bi,Ri=(e,t,n)=>Ue(e,t,n)<=0,Ai=Ri,Si=(e,t,n,o)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return mi(e,n,o);case"!=":return gi(e,n,o);case">":return Ei(e,n,o);case">=":return Ii(e,n,o);case"<":return wi(e,n,o);case"<=":return Ai(e,n,o);default:throw new TypeError(`Invalid operator: ${t}`)}},bt=Si,Ke=Symbol("SemVer ANY"),Ye=class{static get ANY(){return Ke}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ye){if(e.loose===!!t.loose)return e;e=e.value}Y("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Ke?this.value="":this.value=this.operator+this.semver.version,Y("comp",this)}parse(e){let t=this.options.loose?vr[gr.COMPARATORLOOSE]:vr[gr.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new ee(n[2],this.options.loose):this.semver=Ke}toString(){return this.value}test(e){if(Y("Comparator.test",e,this.options.loose),this.semver===Ke||e===Ke)return!0;if(typeof e=="string")try{e=new ee(e,this.options)}catch(t){return!1}return bt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Ye))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new $e(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new $e(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),o=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),s=this.semver.version===e.semver.version,l=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),m=bt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),p=bt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||o||s&&l||m||p}},{re:vr,t:gr}=ze,$e=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof $e)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new $e(e.raw,t);if(e instanceof Ye)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?re[te.HYPHENRANGELOOSE]:re[te.HYPHENRANGE];e=e.replace(n,ki(this.options.includePrerelease)),Y("hyphen replace",e),e=e.replace(re[te.COMPARATORTRIM],Ni),Y("comparator trim",e,re[te.COMPARATORTRIM]),e=(e=(e=e.replace(re[te.TILDETRIM],Mi)).replace(re[te.CARETTRIM],Ti)).split(/\s+/).join(" ");let o=t?re[te.COMPARATORLOOSE]:re[te.COMPARATOR];return e.split(" ").map(s=>Oi(s,this.options)).join(" ").split(/\s+/).map(s=>Wi(s,this.options)).filter(this.options.loose?s=>!!s.match(o):()=>!0).map(s=>new Ye(s,this.options))}intersects(e,t){if(!(e instanceof $e))throw new TypeError("a Range is required");return this.set.some(n=>yr(n,t)&&e.set.some(o=>yr(o,t)&&n.every(s=>o.every(l=>s.intersects(l,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ee(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(Bi(this.set[t],e,this.options))return!0;return!1}},{re,t:te,comparatorTrimReplace:Ni,tildeTrimReplace:Mi,caretTrimReplace:Ti}=ze,yr=(e,t)=>{let n=!0,o=e.slice(),s=o.pop();for(;n&&o.length;)n=o.every(l=>s.intersects(l,t)),s=o.pop();return n},Oi=(e,t)=>(Y("comp",e,t),e=Ci(e,t),Y("caret",e),e=Li(e,t),Y("tildes",e),e=Di(e,t),Y("xrange",e),e=Ui(e,t),Y("stars",e),e),oe=e=>!e||e.toLowerCase()==="x"||e==="*",Li=(e,t)=>e.trim().split(/\s+/).map(n=>Pi(n,t)).join(" "),Pi=(e,t)=>{let n=t.loose?re[te.TILDELOOSE]:re[te.TILDE];return e.replace(n,(o,s,l,m,p)=>{let v;return Y("tilde",e,o,s,l,m,p),oe(s)?v="":oe(l)?v=`>=${s}.0.0 <${+s+1}.0.0-0`:oe(m)?v=`>=${s}.${l}.0 <${s}.${+l+1}.0-0`:p?(Y("replaceTilde pr",p),v=`>=${s}.${l}.${m}-${p} <${s}.${+l+1}.0-0`):v=`>=${s}.${l}.${m} <${s}.${+l+1}.0-0`,Y("tilde return",v),v})},Ci=(e,t)=>e.trim().split(/\s+/).map(n=>$i(n,t)).join(" "),$i=(e,t)=>{Y("caret",e,t);let n=t.loose?re[te.CARETLOOSE]:re[te.CARET],o=t.includePrerelease?"-0":"";return e.replace(n,(s,l,m,p,v)=>{let g;return Y("caret",e,s,l,m,p,v),oe(l)?g="":oe(m)?g=`>=${l}.0.0${o} <${+l+1}.0.0-0`:oe(p)?g=l==="0"?`>=${l}.${m}.0${o} <${l}.${+m+1}.0-0`:`>=${l}.${m}.0${o} <${+l+1}.0.0-0`:v?(Y("replaceCaret pr",v),g=l==="0"?m==="0"?`>=${l}.${m}.${p}-${v} <${l}.${m}.${+p+1}-0`:`>=${l}.${m}.${p}-${v} <${l}.${+m+1}.0-0`:`>=${l}.${m}.${p}-${v} <${+l+1}.0.0-0`):(Y("no pr"),g=l==="0"?m==="0"?`>=${l}.${m}.${p}${o} <${l}.${m}.${+p+1}-0`:`>=${l}.${m}.${p}${o} <${l}.${+m+1}.0-0`:`>=${l}.${m}.${p} <${+l+1}.0.0-0`),Y("caret return",g),g})},Di=(e,t)=>(Y("replaceXRanges",e,t),e.split(/\s+/).map(n=>xi(n,t)).join(" ")),xi=(e,t)=>{e=e.trim();let n=t.loose?re[te.XRANGELOOSE]:re[te.XRANGE];return e.replace(n,(o,s,l,m,p,v)=>{Y("xRange",e,o,s,l,m,p,v);let g=oe(l),y=g||oe(m),N=y||oe(p),I=N;return s==="="&&I&&(s=""),v=t.includePrerelease?"-0":"",g?o=s===">"||s==="<"?"<0.0.0-0":"*":s&&I?(y&&(m=0),p=0,s===">"?(s=">=",y?(l=+l+1,m=0,p=0):(m=+m+1,p=0)):s==="<="&&(s="<",y?l=+l+1:m=+m+1),s==="<"&&(v="-0"),o=`${s+l}.${m}.${p}${v}`):y?o=`>=${l}.0.0${v} <${+l+1}.0.0-0`:N&&(o=`>=${l}.${m}.0${v} <${l}.${+m+1}.0-0`),Y("xRange return",o),o})},Ui=(e,t)=>(Y("replaceStars",e,t),e.trim().replace(re[te.STAR],"")),Wi=(e,t)=>(Y("replaceGTE0",e,t),e.trim().replace(re[t.includePrerelease?te.GTE0PRE:te.GTE0],"")),ki=e=>(t,n,o,s,l,m,p,v,g,y,N,I,M)=>`${n=oe(o)?"":oe(s)?`>=${o}.0.0${e?"-0":""}`:oe(l)?`>=${o}.${s}.0${e?"-0":""}`:m?`>=${n}`:`>=${n}${e?"-0":""}`} ${v=oe(g)?"":oe(y)?`<${+g+1}.0.0-0`:oe(N)?`<${g}.${+y+1}.0-0`:I?`<=${g}.${y}.${N}-${I}`:e?`<${g}.${y}.${+N+1}-0`:`<=${v}`}`.trim(),Bi=(e,t,n)=>{for(let o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let o=0;o<e.length;o++)if(Y(e[o].semver),e[o].semver!==Ye.ANY&&e[o].semver.prerelease.length>0){let s=e[o].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},Fi=(e,t,n)=>{try{t=new $e(t,n)}catch(o){return!1}return t.test(e)},{MAX_LENGTH:Gi}=At,{re:Er,t:_r}=ze,ji=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof ee)return e;if(typeof e!="string"||e.length>Gi||!(t.loose?Er[_r.LOOSE]:Er[_r.FULL]).test(e))return null;try{return new ee(e,t)}catch(n){return null}},Vi=ji,{re:et,t:tt}=ze,Ki=(e,t)=>{if(e instanceof ee)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let o;for(;(o=et[tt.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&o.index+o[0].length===n.index+n[0].length||(n=o),et[tt.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;et[tt.COERCERTL].lastIndex=-1}else n=e.match(et[tt.COERCE]);return n===null?null:Vi(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};function qi(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Yi(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function Hi(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,qi))}function Xi(e){return decodeURIComponent(Array.from(atob(e),Yi).join(""))}function Nr(e){return Hi(JSON.stringify(e))}function zi(e){return JSON.parse(Xi(e))}function qe(e){return typeof e=="undefined"}function Ji(e){return e===null}function Mr(e){return Ji(e)||qe(e)}function Qi(e){return Mr(e)?!1:!qe(e.jsonrpc)&&!qe(e.id)&&(!qe(e.result)||!qe(e.error))}function Zi(e){return Mr(e)?!1:typeof e=="number"&&Object.values(Le).includes(e)}function wt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var H={};function Tr(e,t){return Object.assign(H,t),e}var eo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},ve=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,ve.prototype)}},De=class extends Error{constructor(e){super(),this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Zi(t)?t:Le.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=(e==null?void 0:e.data)||void 0,Object.setPrototypeOf(this,De.prototype)}},We=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},ut=class extends Error{constructor(e,t,n,o){super(`Magic Extension Error (${e.name}): [${t}] ${n}`),this.code=t,this.rawMessage=n,this.data=o,this.__proto__=Error,Object.setPrototypeOf(this,ut.prototype)}},ot=class{constructor(e,t,n){this.code=t,this.rawMessage=n,this.message=`Magic Extension Warning (${e.name}): [${t}] ${n}`}log(){console.warn(this.message)}};function to(){return new ve(pe.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Or(){return new ve(pe.ModalNotReady,"Modal is not ready.")}function ro(){return new ve(pe.MalformedResponse,"Response from the Magic iframe is malformed.")}function no(e){return new ve(pe.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function io(e){let t=`Some extensions are incompatible with \`${H.sdkName}@${H.version}\`:`;return e.filter(n=>typeof n.compat!="undefined"&&n.compat!==null).forEach(n=>{let o=n.compat[H.sdkName];typeof o=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${o}\``:o||(t+=`
  - Extension \`${n.name}\` does not support ${H.platform} environments.`)}),new ve(pe.IncompatibleExtensions,t)}function oo(e){let t=n=>{let o=n+1,s=o%10,l=o%100;return s===1&&l!==11?`${o}st`:s===2&&l!==12?`${o}nd`:s===3&&l!==13?`${o}rd`:`${o}th`};return new ve(pe.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function Lr(){return new We(Re.DuplicateIframe,"Duplicate iframes found.")}function ao(){return new We(Re.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function so(){return new We(Re.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${H.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function ce(e){let{method:t,removalVersions:n,useInstead:o}=e,s=n[H.sdkName],l=o?` Use \`${o}\` instead.`:"",m=`\`${t}\` will be removed from \`${H.sdkName}\` in version \`${s}\`.${l}`;return new We(Re.DeprecationNotice,m)}function*lo(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var uo=lo();function Pr(){return uo.next().value}var Cr=Symbol("Payload pre-processed by Magic SDK");function $r(e){return Object.defineProperty(e,Cr,{value:!0,enumerable:!1}),e}function co(e){return!!e[Cr]}function at(e){var t,n,o;return co(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=Pr(),e.method=(n=e.method)!=null?n:"noop",e.params=(o=e.params)!=null?o:[],$r(e)),e}function V(e,t=[]){return $r({params:t,method:e,jsonrpc:"2.0",id:Pr()})}var St=class{constructor(e){e instanceof St?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Qi(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error!="undefined"&&this._error!==null}get hasResult(){return typeof this._result!="undefined"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},fo=ai(si()),ho=class extends fo.default{};function Dr(){let e=new ho;return{emitter:e,createChainingEmitterMethod:(t,n)=>(...o)=>(e[t].apply(e,o),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}var xr=Symbol("isPromiEvent");function Nt(e){return!!e[xr]}function Ur(e){let t=Wr(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:o}=Dr(),s=Symbol("Promise.then"),l=Symbol("Promise.catch"),m=Symbol("Promise.finally"),p=(y,N)=>(...I)=>{let M=N[y].apply(N,I);return v(M)},v=y=>Object.assign(y,{[xr]:!0,[s]:y[s]||y.then,[l]:y[l]||y.catch,[m]:y[m]||y.finally,then:p(s,y),catch:p(l,y),finally:p(m,y),on:o("on",y),once:o("once",y),addListener:o("addListener",y),off:o("off",y),removeListener:o("removeListener",y),removeAllListeners:o("removeAllListeners",y),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),g=v(t.then(y=>(g.emit("done",y),g.emit("settled"),y),y=>{throw g.emit("error",y),g.emit("settled"),y}));return g}function Wr(e){return new Promise((t,n)=>{let o=e(t,n);Promise.resolve(o).catch(n)})}var Ne=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ae.MAGIC_HANDLE_REQUEST,at(e)),n=Ur((s,l)=>{t.then(m=>{if(o(),m.hasError)l(new De(m.payload.error));else if(m.hasResult)s(m.payload.result);else throw ro()}).catch(m=>{o(),l(m)})}),o=this.overlay.on(me.MAGIC_HANDLE_EVENT,s=>{var l;let{response:m}=s.data;if(m.id===e.id&&((l=m.result)==null?void 0:l.event)){let{event:p,params:v=[]}=m.result;n.emit(p,...v)}});return n}createIntermediaryEvent(e,t){return n=>{let o=V($.IntermediaryEvent,[{payloadId:t,eventType:e,args:n}]);this.request(o)}}},fe={"magic-sdk":"v18.0.0","@magic-sdk/react-native":"v14.0.0","@magic-sdk/react-native-bare":"v19.0.0","@magic-sdk/react-native-expo":"v19.0.0"},po=class extends Ne{loginWithMagicLink(e){let t=H.sdkName==="@magic-sdk/react-native"||H.sdkName==="@magic-sdk/react-native-bare"||H.sdkName==="@magic-sdk/react-native-expo";ce({method:"auth.loginWithMagicLink()",removalVersions:fe,useInstead:t?"@magic-ext/auth auth.loginWithEmailOTP()":"@magic-ext/auth auth.loginWithMagicLink()"}).log();let{email:n,showUI:o=!0,redirectURI:s}=e,l=V(this.sdk.testMode?$.LoginWithMagicLinkTestMode:$.LoginWithMagicLink,[{email:n,showUI:o,redirectURI:s}]);return this.request(l)}loginWithSMS(e){ce({method:"auth.loginWithSMS()",removalVersions:fe,useInstead:"@magic-ext/auth auth.loginWithSMS()"}).log();let{phoneNumber:t}=e,n=V(this.sdk.testMode?$.LoginWithSmsTestMode:$.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithEmailOTP(e){ce({method:"auth.loginWithEmailOTP()",removalVersions:fe,useInstead:"@magic-ext/auth auth.loginWithEmailOTP()"}).log();let{email:t,showUI:n}=e,o=V(this.sdk.testMode?$.LoginWithEmailOTPTestMode:$.LoginWithEmailOTP,[{email:t,showUI:n}]);if(!n){let s=this.request(o);return s&&(s.on("verify-email-otp",l=>{this.createIntermediaryEvent("verify-email-otp",o.id)(l)}),s.on("cancel",()=>{this.createIntermediaryEvent("cancel",o.id)()})),s}return this.request(o)}loginWithCredential(e){ce({method:"auth.loginWithCredential()",removalVersions:fe,useInstead:"@magic-ext/auth auth.loginWithCredential()"}).log();let t=e!=null?e:"";if(!e&&H.platform==="web"){t=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let n=V(this.sdk.testMode?$.LoginWithCredentialTestMode:$.LoginWithCredential,[t]);return this.request(n)}setAuthorizationToken(e){ce({method:"auth.setAuthorizationToken()",removalVersions:fe,useInstead:"@magic-ext/auth auth.setAuthorizationToken()"}).log();let t=V($.SetAuthorizationToken,[{jwt:e}]);return this.request(t)}updateEmailWithUI(e){ce({method:"auth.updateEmailWithUI()",removalVersions:fe,useInstead:"@magic-ext/auth auth.updateEmailWithUI()"}).log();let{email:t,showUI:n=!0}=e,o=V(this.sdk.testMode?$.UpdateEmailTestMode:$.UpdateEmail,[{email:t,showUI:n}]);return this.request(o)}updatePhoneNumberWithUI(){ce({method:"auth.updatePhoneNumberWithUI()",removalVersions:fe,useInstead:"@magic-ext/auth auth.updatePhoneNumberWithUI()"}).log();let e=V(this.sdk.testMode?$.UpdatePhoneNumberTestMode:$.UpdatePhoneNumber);return this.request(e)}},kr={};ii(kr,{clear:()=>mo,getItem:()=>_e,iterate:()=>Eo,key:()=>go,keys:()=>yo,length:()=>vo,removeItem:()=>He,setItem:()=>xe});var rt;function Ie(e){return(...t)=>ae(this,null,function*(){return rt||(rt=yield H.configureStorage()),yield rt.ready(),rt[e](...t)})}var _e=Ie("getItem"),xe=Ie("setItem"),He=Ie("removeItem"),mo=Ie("clear"),vo=Ie("length"),go=Ie("key"),yo=Ie("keys"),Eo=Ie("iterate");function _o(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var Mt="STORE_KEY_PRIVATE_KEY",st="STORE_KEY_PUBLIC_JWK",Tt="ECDSA",Br="P-256",Io={name:Tt,namedCurve:Br},bo={name:Tt,namedCurve:Br};function Fr(){He(st),He(Mt)}function wo(){return ae(this,null,function*(){let e=yield Ro();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield _e(Mt);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let o={iat:Math.floor(new Date().getTime()/1e3),jti:_o()},s={typ:"dpop+jwt",alg:"ES256",jwk:e},l={protected:Ir(JSON.stringify(s)),claims:Ir(JSON.stringify(o))},m=No(`${l.protected}.${l.claims}`),p={name:Tt,hash:{name:"SHA-256"}},v=To(new Uint8Array(yield t.sign(p,n,m)));return`${l.protected}.${l.claims}.${v}`})}function Ro(){return ae(this,null,function*(){if(!So()){console.info("webcrypto is not supported");return}return(yield _e(st))||(yield Ao()),_e(st)})}function Ao(){return ae(this,null,function*(){let e=null,{subtle:t}=window.crypto,n=yield t.generateKey(Io,!0,["sign"]),o=yield t.exportKey("jwk",n.privateKey);e=yield t.exportKey("jwk",n.publicKey);let s=yield t.importKey("jwk",o,bo,!1,["sign"]);yield xe(Mt,s),yield xe(st,e)})}function So(){let e=typeof window!="undefined"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function Ir(e){return Gr(Mo(e))}function No(e){return new TextEncoder().encode(e)}function Gr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function Mo(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}function To(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n)}),Gr(t)}var Oo=class extends Ne{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}getIdToken(e){let t=V(this.sdk.testMode?$.GetIdTokenTestMode:$.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=V(this.sdk.testMode?$.GenerateIdTokenTestMode:$.GenerateIdToken,[e]);return this.request(t)}getInfo(){return ae(this,null,function*(){let e=yield _e(this.localForageKey),t=V($.GetInfo,[{walletType:e}]);return this.request(t)})}isLoggedIn(){let e=V(this.sdk.testMode?$.IsLoggedInTestMode:$.IsLoggedIn);return this.request(e)}logout(){Fr(),He(this.localForageKey);let e=V(this.sdk.testMode?$.LogoutTestMode:$.Logout);return this.request(e)}requestInfoWithUI(e){let t=V($.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}showSettings(e){let t=V(this.sdk.testMode?$.UserSettingsTestMode:$.UserSettings,[e]);return this.request(t)}recoverAccount(e){let t=V(this.sdk.testMode?$.RecoverAccountTestMode:$.RecoverAccount,[e]);return this.request(t)}getMetadata(){ce({method:"user.getMetadata()",removalVersions:fe,useInstead:"user.getInfo()"}).log();let e=V(this.sdk.testMode?$.GetMetadataTestMode:$.GetMetadata);return this.request(e)}updateEmail(e){ce({method:"user.updateEmail()",removalVersions:fe,useInstead:"auth.updateEmailWithUI()"}).log();let{email:t,showUI:n=!0}=e,o=V(this.sdk.testMode?$.UpdateEmailTestMode:$.UpdateEmail,[{email:t,showUI:n}]);return this.request(o)}updatePhoneNumber(){ce({method:"user.updatePhoneNumber()",removalVersions:fe,useInstead:"auth.updatePhoneNumberWithUI()"}).log();let e=V(this.sdk.testMode?$.UpdatePhoneNumberTestMode:$.UpdatePhoneNumber);return this.request(e)}},Lo=class extends Ne{constructor(){super(...arguments),this.localForageKey="mc_active_wallet"}connectWithUI(){return ae(this,null,function*(){if(this.isMetaMaskBrowser())try{if(yield this.isWalletEnabled(ue.MetaMask))return this.autoConnectIfWalletBrowser(ue.MetaMask)}catch(o){console.error(o)}if(this.isCoinbaseWalletBrowser())try{if(yield this.isWalletEnabled(ue.CoinbaseWallet))return this.autoConnectIfWalletBrowser(ue.CoinbaseWallet)}catch(o){console.error(o)}let e=this.getUserEnv(),t=V($.Login,[e]),n=this.request(t);return n.on(Pe.WalletSelected,o=>this.handleWalletSelected(Ar(Rt({},o),{payloadId:t.id}))),n})}showUI(){let e=V($.ShowUI);return this.request(e)}getInfo(){return ae(this,null,function*(){ce({method:"wallet.getInfo()",removalVersions:fe,useInstead:"user.getInfo()"}).log();let e=yield _e(this.localForageKey),t=V($.GetInfo,[{walletType:e}]);return this.request(t)})}disconnect(){ce({method:"wallet.disconnect()",removalVersions:fe,useInstead:"user.logout()"}).log(),Fr(),He(this.localForageKey);let e=V($.Disconnect);return this.request(e)}requestUserInfoWithUI(e){ce({method:"wallet.requestUserInfoWithUI()",removalVersions:fe,useInstead:"user.requestUserInfoWithUI()"}).log();let t=V($.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}getProvider(){return ae(this,null,function*(){switch(yield _e(this.localForageKey)){case ue.MetaMask:return this.getMetaMaskProvider();case ue.CoinbaseWallet:return this.getCoinbaseProvider();default:return this.sdk.rpcProvider}})}isMetaMaskInstalled(){var e,t,n;return((e=window.ethereum)==null?void 0:e.isMetaMask)||!!((n=(t=window.ethereum)==null?void 0:t.providers)!=null&&n.find(o=>o==null?void 0:o.isMetaMask))}isMetaMaskBrowser(){return this.isMobile()&&this.isMetaMaskInstalled()}getMetaMaskProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(n=>n==null?void 0:n.isMetaMask))||window.ethereum}connectToMetaMask(){if(this.isMobile()&&!this.isMetaMaskInstalled()){let e=`https://metamask.app.link/dapp/${window.location.href.replace(/(^\w+:|^)\/\//,"")}`;window.location.href=e}return this.getMetaMaskProvider().request({method:"eth_requestAccounts"})}isCoinbaseWalletInstalled(){var e,t,n;return((e=window.ethereum)==null?void 0:e.isCoinbaseWallet)||!!((n=(t=window.ethereum)==null?void 0:t.providers)!=null&&n.find(o=>o==null?void 0:o.isCoinbaseWallet))}isCoinbaseWalletBrowser(){var e;return!!((e=window.ethereum)!=null&&e.isCoinbaseBrowser)}getCoinbaseProvider(){var e,t;return((t=(e=window.ethereum)==null?void 0:e.providers)==null?void 0:t.find(n=>n==null?void 0:n.isCoinbaseWallet))||window.ethereum}connectToCoinbaseWallet(){if(this.isMobile()&&!this.isCoinbaseWalletBrowser()){let e=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(window.location.href)}`;window.location.href=e}return this.getCoinbaseProvider().request({method:"eth_requestAccounts"})}isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Silk|Opera Mini/i.test(navigator.userAgent)}getUserEnv(){return{env:{isMetaMaskInstalled:this.isMetaMaskInstalled(),isCoinbaseWalletInstalled:this.isCoinbaseWalletInstalled()}}}connectToThirdPartyWallet(e){switch(e){case ue.MetaMask:return this.connectToMetaMask();case ue.CoinbaseWallet:return this.connectToCoinbaseWallet();default:throw new Error(`Invalid provider: ${e}. Must be one of "metamask" or "coinbase_wallet".`)}}isWalletEnabled(e){let t=V("mc_is_wallet_enabled",[{wallet:e}]);return this.request(t)}handleWalletSelected(e){return ae(this,null,function*(){try{let t=yield this.connectToThirdPartyWallet(e.wallet);yield xe(this.localForageKey,e.wallet),this.createIntermediaryEvent(Pe.WalletConnected,e.payloadId)(t)}catch(t){console.error(t),this.createIntermediaryEvent(Pe.WalletRejected,e.payloadId)()}})}autoConnectIfWalletBrowser(e){return ae(this,null,function*(){let t;e===ue.MetaMask&&(t=yield this.getMetaMaskProvider().request({method:"eth_requestAccounts"})),e===ue.CoinbaseWallet&&(t=yield this.getCoinbaseProvider().request({method:"eth_requestAccounts"})),yield xe(this.localForageKey,e);let n=V($.AutoConnect,[{wallet:e,address:t}]);return this.request(n)})}},{createBoundEmitterMethod:nt,createChainingEmitterMethod:Ce}=Dr(),Po=class extends Ne{constructor(){super(...arguments),this.isMagic=!0,this.on=Ce("on",this),this.once=Ce("once",this),this.addListener=Ce("addListener",this),this.off=Ce("off",this),this.removeListener=Ce("removeListener",this),this.removeAllListeners=Ce("removeAllListeners",this),this.emit=nt("emit"),this.eventNames=nt("eventNames"),this.listeners=nt("listeners"),this.listenerCount=nt("listenerCount")}sendAsync(e,t){if(!t)throw oo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ae.MAGIC_HANDLE_REQUEST,e.map(n=>{let o=at(n);return this.prefixPayloadMethodForTestMode(o),o})).then(n=>{t(null,n.map(o=>Ar(Rt({},o.payload),{error:o.hasError?new De(o.payload.error):null})))});else{let n=at(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(Ae.MAGIC_HANDLE_REQUEST,n).then(o=>{t(o.hasError?new De(o.payload.error):null,o.payload)})}}send(e,t){if(typeof e=="string"){let o=V(e,Array.isArray(t)?t:[]);return this.request(o)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let n=ao();return n.log(),new St(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=V("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}};function Xe(e,t){return t?new URL(e,t):new URL(e)}var br=["request","overlay","sdk"];function Co(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==Ne.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}var jr=class extends Ne{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Ur,isPromiEvent:Nt,encodeJSON:Nr,decodeJSON:zi,createJsonRpcRequestPayload:V,standardizeJsonRpcRequestPayload:at,storage:kr};let e=[this,...Co(this)];br.forEach(t=>{let n=e.map(m=>Object.getOwnPropertyDescriptor(m,t)),o=n.findIndex(m=>!!m),s=o>0,l=n[o];l&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:l,isPrototypeField:s}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw no(t)}}))})}init(e){this.__is_initialized__||(br.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:o}=this.__sdk_access_field_descriptors__.get(t);o?delete this[t]:Object.defineProperty(this,t,n)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:o}=e,s=o?` Use \`${o}\` instead.`:"",l=`\`${t}\` will be removed from this Extension in version \`${n}\`.${s}`;return new ot(this,"DEPRECATION_NOTICE",l)}createWarning(e,t){return new ot(this,e,t)}createError(e,t,n){return new ut(this,e,t,n)}},$o=class extends jr{},Se=class extends jr{};Se.Internal=$o,Se.Anonymous="anonymous extension";var Do=class extends Ne{purchase(e){let t=V($.NFTPurchase,[e]);return this.request(t)}};function wr(e){return e.compat&&e.compat[H.sdkName]!=null?typeof e.compat[H.sdkName]=="string"?Fi(Ki(H.version),e.compat[H.sdkName]):!!e.compat[H.sdkName]:!0}function xo(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],o={},s=[];if(Array.isArray(n)?n.forEach(l=>{wr(l)?(l.init(this),(l.name||l.name!==Se.Anonymous)&&(this[l.name]=l),l instanceof Se.Internal&&(wt(l.config)||(o[l.name]=l.config))):s.push(l)}):Object.keys(n).forEach(l=>{if(wr(n[l])){n[l].init(this);let m=n[l];this[l]=m,m instanceof Se.Internal&&(wt(m.config)||(o[n[l].name]=m.config))}else s.push(n[l])}),s.length)throw io(s);return o}var it=class{constructor(e,t){this.apiKey=e;var n;if(!e)throw to();H.platform==="react-native"&&(t==null?void 0:t.endpoint)&&so().log();let{defaultEndpoint:o,version:s}=H;this.testMode=!!(t!=null&&t.testMode),this.endpoint=Xe((n=t==null?void 0:t.endpoint)!=null?n:o).origin,this.auth=new po(this),this.user=new Oo(this),this.wallet=new Lo(this),this.nft=new Do(this),this.rpcProvider=new Po(this);let l=xo.call(this,t);this.parameters=Nr(Rt({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:Xe(this.endpoint).host,sdk:eo[H.sdkName],version:s,ext:wt(l)?void 0:l,locale:(t==null?void 0:t.locale)||"en_US"},H.bundleId?{bundleId:H.bundleId}:{}))}get overlay(){if(!it.__overlays__.has(this.parameters)){let e=new H.ViewController(this.endpoint,this.parameters);e.init(),it.__overlays__.set(this.parameters,e)}return it.__overlays__.get(this.parameters)}preload(){return ae(this,null,function*(){yield this.overlay.ready})}},Ot=it;Ot.__overlays__=new Map;function Uo(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}function Wo(e,t){var n;let o=(n=t.data.response)==null?void 0:n.id,s=Uo(e,o);if(o&&s){let l=new St(s).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:o,response:l}}return{}}function ko(e,t){return ae(this,null,function*(){let n=yield _e("rt"),o;if(H.platform==="web")try{o=yield wo()}catch(s){console.error("webcrypto error",s)}return o?n?{msgType:e,payload:t,jwt:o,rt:n}:{msgType:e,payload:t,jwt:o}:{msgType:e,payload:t}})}function Bo(e){return ae(this,null,function*(){!e.data.rt||(yield xe("rt",e.data.rt))})}var Vr=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return ae(this,null,function*(){return Wr(n=>ae(this,null,function*(){yield this.ready;let o=[],s=Array.isArray(t)?t.map(v=>v.id):[],l=yield ko(`${e}-${this.parameters}`,t);yield this._post(l);let m=v=>g=>{let{id:y,response:N}=Wo(t,g);Bo(g),y&&N&&Array.isArray(t)&&s.includes(y)?(o.push(N),o.length===t.length&&(v(),n(o))):y&&N&&!Array.isArray(t)&&y===t.id&&(v(),n(N))},p=this.on(me.MAGIC_HANDLE_RESPONSE,m(()=>p()))}))})}on(e,t){let n=t.bind(window),o=s=>{s.data.msgType===`${e}-${this.parameters}`&&n(s)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{this.on(me.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(me.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(me.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}};var Lt={};ir(Lt,{DeepLinkPage:()=>sr,EthChainType:()=>lr,Events:()=>Pe,Extension:()=>Se,ExtensionError:()=>ut,ExtensionWarning:()=>ot,MagicIncomingWindowMessage:()=>me,MagicOutgoingWindowMessage:()=>Ae,MagicPayloadMethod:()=>$,RPCError:()=>De,RPCErrorCode:()=>Le,RecoveryMethodType:()=>ur,SDKError:()=>ve,SDKErrorCode:()=>pe,SDKWarning:()=>We,SDKWarningCode:()=>Re,Wallets:()=>ue,isPromiEvent:()=>Nt});var dt=ar(qr()),Ct=ar(Hr());var Fo={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Go(e){for(let[t,n]of Object.entries(Fo))e.style[t]=n}function jo(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(n=>n.src.includes(e)))}var ft=class extends Vr{constructor(){super(...arguments);this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(n=>{let o=()=>{if(jo(encodeURIComponent(this.parameters)))Lr().log();else{let s=document.createElement("iframe");s.classList.add("magic-iframe"),s.dataset.magicIframeLabel=Xe(this.endpoint).host,s.title="Secure Modal",s.src=Xe(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Go(s),document.body.appendChild(s),n(s)}};["loaded","interactive","complete"].includes(document.readyState)?o():window.addEventListener("load",o,!1)}),window.addEventListener("message",n=>{var o;if(n.origin===this.endpoint&&n.data&&n.data.msgType&&this.messageHandlers.size){n.data.response=(o=n.data.response)!=null?o:{};for(let s of this.messageHandlers.values())s(n)}})}showOverlay(){return Oe(this,null,function*(){let n=yield this.iframe;n.style.display="block",this.activeElement=document.activeElement,n.focus()})}hideOverlay(){return Oe(this,null,function*(){var o;let n=yield this.iframe;n.style.display="none",(o=this.activeElement)!=null&&o.focus&&this.activeElement.focus(),this.activeElement=null})}_post(n){return Oe(this,null,function*(){let o=yield this.iframe;if(o&&o.contentWindow)o.contentWindow.postMessage(n,this.endpoint);else throw Or()})}};var Vo=Object.assign(Tr(Ot,{platform:"web",sdkName:"magic-sdk",version:"17.3.0",defaultEndpoint:"https://auth.magic.link/",ViewController:ft,configureStorage:()=>Oe(void 0,null,function*(){let e=dt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Ct),yield e.setDriver([dt.default.INDEXEDDB,dt.default.LOCALSTORAGE,Ct._driver]),e})}),rr({},Lt)),Ko=Vo;return Xn(qo);})();
if (Magic && Magic.default != null) { Magic = Object.assign(Magic.default, Magic); delete Magic.default; }
